<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.62.2" />
    <meta name="description" content="Do Learn">
<meta name="author" content="Myeongjin Kim">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Variables :: Ibiza</title>

    
    <link href="/css/nucleus.css?1593265576" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1593265576" rel="stylesheet">
    <link href="/css/hybrid.css?1593265576" rel="stylesheet">
    <link href="/css/featherlight.min.css?1593265576" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1593265576" rel="stylesheet">
    <link href="/css/auto-complete.css?1593265576" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1593265576" rel="stylesheet">
    <link href="/css/theme.css?1593265576" rel="stylesheet">
    <link href="/css/hugo-theme.css?1593265576" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1593265576" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1593265576"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-159865175-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </head>
  <body class="" data-url="/ansible/ansible-for-devops/chapter5/variables/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div >
<img src="https://avatars3.githubusercontent.com/u/6358016?s=460&v=4" style="border-radius: 50%; opacity: 0;"  width="50%" height="50%"/>
</div>
<h3 margin="100px"><p style="color: white">Ibiza</p></h3>
<p style="color: white">기록하는 습관</p>
    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/ibiza/" title="Ibiza" class="dd-item 
        
        
        
        ">
      <a href="/ibiza/">
          <i class='fas fa-angle-right'></i>&nbsp;Ibiza
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ibiza/importance-of-record/" title="Importance of Record" class="dd-item ">
        <a href="/ibiza/importance-of-record/">
        <i class='fas fa-minus'></i>&nbsp;Importance of Record
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ibiza/2020-plan/" title="2020 Plan" class="dd-item ">
        <a href="/ibiza/2020-plan/">
        <i class='fas fa-minus'></i>&nbsp;2020 Plan
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ibiza/ibiza-project/" title="Ibiza Project" class="dd-item ">
        <a href="/ibiza/ibiza-project/">
        <i class='fas fa-minus'></i>&nbsp;Ibiza Project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ibiza/2020-new-year-holiday-plans/" title="2020 New Year Holiday Plans" class="dd-item ">
        <a href="/ibiza/2020-new-year-holiday-plans/">
        <i class='fas fa-minus'></i>&nbsp;2020 New Year Holiday Plans
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ibiza/diary/" title="Diary" class="dd-item 
        
        
        
        ">
      <a href="/ibiza/diary/">
          <i class='fas fa-angle-right'></i>&nbsp;Diary
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ibiza/diary/20200627/" title="2020년 6월 27일 일기" class="dd-item ">
        <a href="/ibiza/diary/20200627/">
        <i class='fas fa-minus'></i>&nbsp;2020년 6월 27일 일기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ibiza/diary/20200331/" title="2020/03/31 일기" class="dd-item ">
        <a href="/ibiza/diary/20200331/">
        <i class='fas fa-minus'></i>&nbsp;2020/03/31 일기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ibiza/cka-prepare/" title="CKA(Certified Kubernetes Administrator) 시험 준비" class="dd-item ">
        <a href="/ibiza/cka-prepare/">
        <i class='fas fa-minus'></i>&nbsp;CKA(Certified Kubernetes Administrator) 시험 준비
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/harbor/" title="Harbor" class="dd-item 
        
        
        
        ">
      <a href="/harbor/">
          <i class='fas fa-angle-right'></i>&nbsp;Harbor
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/harbor/install/" title="Harbor 설치" class="dd-item ">
        <a href="/harbor/install/">
        <i class='fas fa-minus'></i>&nbsp;Harbor 설치
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/git/" title="Git" class="dd-item 
        
        
        
        ">
      <a href="/git/">
          <i class='fas fa-angle-right'></i>&nbsp;Git
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/git/git-secret/" title="git-secret을 통한 github 파일 암호화" class="dd-item ">
        <a href="/git/git-secret/">
        <i class='fas fa-minus'></i>&nbsp;git-secret을 통한 github 파일 암호화
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/git/gitignore/" title="Gitignore 설정" class="dd-item ">
        <a href="/git/gitignore/">
        <i class='fas fa-minus'></i>&nbsp;Gitignore 설정
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/python/" title="Python" class="dd-item 
        
        
        
        ">
      <a href="/python/">
          <i class='fas fa-angle-right'></i>&nbsp;Python
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/python/python-beautiful-cli/" title="[번역]Python을 통해 이쁜 CLI 만들기" class="dd-item ">
        <a href="/python/python-beautiful-cli/">
        <i class='fas fa-minus'></i>&nbsp;[번역]Python을 통해 이쁜 CLI 만들기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docker/" title="Docker" class="dd-item 
        
        
        
        ">
      <a href="/docker/">
          <i class='fas fa-angle-right'></i>&nbsp;Docker
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/insecure-registry/" title="http를 사용하는 docker registry를 위한 insecure registry 설정" class="dd-item ">
        <a href="/docker/insecure-registry/">
        <i class='fas fa-minus'></i>&nbsp;http를 사용하는 docker registry를 위한 insecure registry 설정
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/use-docker-without-sudo/" title="Docker를 sudo없이 실행하기" class="dd-item ">
        <a href="/docker/use-docker-without-sudo/">
        <i class='fas fa-minus'></i>&nbsp;Docker를 sudo없이 실행하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/connect-container-to-container/" title="[docker-compose] container에서 다른 container로 접속하기" class="dd-item ">
        <a href="/docker/connect-container-to-container/">
        <i class='fas fa-minus'></i>&nbsp;[docker-compose] container에서 다른 container로 접속하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/jenkins/" title="Jenkins" class="dd-item 
        
        
        
        ">
      <a href="/jenkins/">
          <i class='fas fa-angle-right'></i>&nbsp;Jenkins
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/jenkins/install/" title="Jenkins Install" class="dd-item ">
        <a href="/jenkins/install/">
        <i class='fas fa-minus'></i>&nbsp;Install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/jenkins/workspace-list/" title="Workspace@2를 변경하기 - Workspace List 설정 변경" class="dd-item ">
        <a href="/jenkins/workspace-list/">
        <i class='fas fa-minus'></i>&nbsp;Workspace@2를 변경하기 - Workspace List 설정 변경
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/iac/" title="IaC" class="dd-item 
        
        
        
        ">
      <a href="/iac/">
          <i class='fas fa-angle-right'></i>&nbsp;IaC
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/iac/translate-what-is-infrastructure-as-a-code/" title="[번역] What Is Infrastructure as a Code? How It Works, Best Practices, Tutorials" class="dd-item ">
        <a href="/iac/translate-what-is-infrastructure-as-a-code/">
        <i class='fas fa-minus'></i>&nbsp;[Translate] What Is Infrastructure as a Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cicd/" title="CICD" class="dd-item 
        
        
        
        ">
      <a href="/cicd/">
          <i class='fas fa-angle-right'></i>&nbsp;CICD
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cicd/deploy-strategy/" title="Deploy Strategy" class="dd-item ">
        <a href="/cicd/deploy-strategy/">
        <i class='fas fa-minus'></i>&nbsp;Deploy Strategy
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/css/" title="CSS" class="dd-item 
        
        
        
        ">
      <a href="/css/">
          <i class='fas fa-angle-right'></i>&nbsp;CSS
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/css/background-img-darken/" title="background image 어둡게 하기" class="dd-item ">
        <a href="/css/background-img-darken/">
        <i class='fas fa-minus'></i>&nbsp;background image 어둡게 하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/css/greater-than-sign/" title="Greater Than Sign" class="dd-item ">
        <a href="/css/greater-than-sign/">
        <i class='fas fa-minus'></i>&nbsp;Greater Than Sign
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/prometheus/" title="Prometheus" class="dd-item 
        
        
        
        ">
      <a href="/prometheus/">
          <i class='fas fa-angle-right'></i>&nbsp;Prometheus
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/prometheus/install/" title="Install Prometheus" class="dd-item ">
        <a href="/prometheus/install/">
        <i class='fas fa-minus'></i>&nbsp;Install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/prometheus/federation/" title="Federation" class="dd-item ">
        <a href="/prometheus/federation/">
        <i class='fas fa-minus'></i>&nbsp;Federation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/kubernetes/" title="Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/">
          <i class='fas fa-angle-right'></i>&nbsp;Kubernetes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/installation/" title="Install" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/installation/">
          <i class='fas fa-angle-right'></i>&nbsp;Install
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/overview/" title="Overview" class="dd-item ">
        <a href="/kubernetes/installation/overview/">
        <i class='fas fa-minus'></i>&nbsp;Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/install-kubeadm/" title="Install Kubeadm" class="dd-item ">
        <a href="/kubernetes/installation/install-kubeadm/">
        <i class='fas fa-minus'></i>&nbsp;Install Kubeadm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/create-a-single-control-plane-cluster-with-kubeadm/" title="Create a Single Control Plane Cluster With Kubeadm" class="dd-item ">
        <a href="/kubernetes/installation/create-a-single-control-plane-cluster-with-kubeadm/">
        <i class='fas fa-minus'></i>&nbsp;Create a Single Control Plane Cluster With Kubeadm
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/cka-study/" title="CKA Study" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/cka-study/">
          <i class='fas fa-angle-right'></i>&nbsp;CKA Study
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/10-kubernetes-the-hard-way/" title="10 Kubernetes the Hard Way" class="dd-item ">
        <a href="/kubernetes/cka-study/10-kubernetes-the-hard-way/">
        <i class='fas fa-minus'></i>&nbsp;10 Kubernetes the Hard Way
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/09-networking/" title="09 Networking" class="dd-item ">
        <a href="/kubernetes/cka-study/09-networking/">
        <i class='fas fa-minus'></i>&nbsp;09 Networking
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/08-storage/" title="08 Storage" class="dd-item ">
        <a href="/kubernetes/cka-study/08-storage/">
        <i class='fas fa-minus'></i>&nbsp;08 Storage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/07-security/" title="07 Security" class="dd-item ">
        <a href="/kubernetes/cka-study/07-security/">
        <i class='fas fa-minus'></i>&nbsp;07 Security
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/06-cluster-maintenance/" title="06 Cluster Maintenance" class="dd-item ">
        <a href="/kubernetes/cka-study/06-cluster-maintenance/">
        <i class='fas fa-minus'></i>&nbsp;06 Cluster Maintenance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/05-application-lifecycle-management/" title="05 Application Lifecycle Management" class="dd-item ">
        <a href="/kubernetes/cka-study/05-application-lifecycle-management/">
        <i class='fas fa-minus'></i>&nbsp;05 Application Lifecycle Management
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/04-logging-and-monitoring/" title="04 Logging and Monitoring" class="dd-item ">
        <a href="/kubernetes/cka-study/04-logging-and-monitoring/">
        <i class='fas fa-minus'></i>&nbsp;04 Logging and Monitoring
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/03-scheduling/" title="03 Scheduling" class="dd-item ">
        <a href="/kubernetes/cka-study/03-scheduling/">
        <i class='fas fa-minus'></i>&nbsp;03 Scheduling
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/02-core-concepts/" title="02 Core Concepts" class="dd-item ">
        <a href="/kubernetes/cka-study/02-core-concepts/">
        <i class='fas fa-minus'></i>&nbsp;02 Core Concepts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/concepts/" title="Concepts" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/concepts/">
          <i class='fas fa-angle-right'></i>&nbsp;Concepts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/concepts/controllers-overview/" title="Controllers Overview" class="dd-item ">
        <a href="/kubernetes/concepts/controllers-overview/">
        <i class='fas fa-minus'></i>&nbsp;Controllers Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/concepts/pods/" title="Pods" class="dd-item ">
        <a href="/kubernetes/concepts/pods/">
        <i class='fas fa-minus'></i>&nbsp;Pods
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/port-targetport-nodeport-in-kubernetes/" title="[번역] 쿠버네티스에서의 Port, TargetPort, NodePort" class="dd-item ">
        <a href="/kubernetes/port-targetport-nodeport-in-kubernetes/">
        <i class='fas fa-minus'></i>&nbsp;[번역] 쿠버네티스에서의 Port, TargetPort, NodePort
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/stern/" title="Stern을 이용하여 여러 pod의 log를 한번에 확인하기" class="dd-item ">
        <a href="/kubernetes/stern/">
        <i class='fas fa-minus'></i>&nbsp;Stern을 이용하여 여러 pod의 log를 한번에 확인하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/hugo/" title="Hugo" class="dd-item 
        
        
        
        ">
      <a href="/hugo/">
          <i class='fas fa-angle-right'></i>&nbsp;Hugo
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/hugo/ibiza/" title="Ibiza" class="dd-item 
        
        
        
        ">
      <a href="/hugo/ibiza/">
          <i class='fas fa-angle-right'></i>&nbsp;Ibiza
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/hugo/ibiza/font-change/" title="Font Change" class="dd-item ">
        <a href="/hugo/ibiza/font-change/">
        <i class='fas fa-minus'></i>&nbsp;Font Change
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/google-analytics/" title="Hugo에 Google Analytics 적용하기" class="dd-item ">
        <a href="/hugo/google-analytics/">
        <i class='fas fa-minus'></i>&nbsp;Hugo에 Google Analytics 적용하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/insert-comment/" title="Hugo에 Comment 추가하기 (Utterance)" class="dd-item ">
        <a href="/hugo/insert-comment/">
        <i class='fas fa-minus'></i>&nbsp;Hugo에 Comment 추가하기 (Utterance)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/hugo-with-html/" title="HUGO로 HTML이 되지 않을 때 가능하게 하는 방법" class="dd-item ">
        <a href="/hugo/hugo-with-html/">
        <i class='fas fa-minus'></i>&nbsp;hugo with html
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/spinnaker/" title="Spinnaker" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/">
          <i class='fas fa-angle-right'></i>&nbsp;Spinnaker
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/installation/" title="Installation" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/installation/">
          <i class='fas fa-angle-right'></i>&nbsp;Installation
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/overview/" title="Overview" class="dd-item ">
        <a href="/spinnaker/installation/overview/">
        <i class='fas fa-minus'></i>&nbsp;Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/install-halyard/" title="Install Halyard" class="dd-item ">
        <a href="/spinnaker/installation/install-halyard/">
        <i class='fas fa-minus'></i>&nbsp;Install Halyard
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-cloud-providers/" title="Choose Cloud Providers" class="dd-item ">
        <a href="/spinnaker/installation/choose-cloud-providers/">
        <i class='fas fa-minus'></i>&nbsp;Choose Cloud Providers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-your-environment/" title="Choose Your Environment" class="dd-item ">
        <a href="/spinnaker/installation/choose-your-environment/">
        <i class='fas fa-minus'></i>&nbsp;Choose Your Environment
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-a-storage-service/" title="Choose a Storage Service" class="dd-item ">
        <a href="/spinnaker/installation/choose-a-storage-service/">
        <i class='fas fa-minus'></i>&nbsp;Choose a Storage Service
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/deploy-and-connect/" title="Deploy and Connect" class="dd-item ">
        <a href="/spinnaker/installation/deploy-and-connect/">
        <i class='fas fa-minus'></i>&nbsp;Deploy and Connect
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/install-in-air-gaped-environment/" title="Install in Air Gaped Environment" class="dd-item ">
        <a href="/spinnaker/installation/install-in-air-gaped-environment/">
        <i class='fas fa-minus'></i>&nbsp;Install in Air Gaped Environment
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/canaryanalysis/" title="CanaryAnalysis" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/canaryanalysis/">
          <i class='fas fa-angle-right'></i>&nbsp;CanaryAnalysis
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/canaryanalysis/canary-analysis/" title="Canary Analysis" class="dd-item ">
        <a href="/spinnaker/canaryanalysis/canary-analysis/">
        <i class='fas fa-minus'></i>&nbsp;Canary Analysis
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/tips/" title="Tips" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/tips/">
          <i class='fas fa-angle-right'></i>&nbsp;Tips
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/tips/pipeline-expressions/" title="Pipeline Expressions" class="dd-item ">
        <a href="/spinnaker/tips/pipeline-expressions/">
        <i class='fas fa-minus'></i>&nbsp;Pipeline Expressions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ansible/" title="Ansible" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/">
          <i class='fas fa-angle-right'></i>&nbsp;Ansible
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/" title="Ansible for DevOps" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/ansible-for-devops/">
          <i class='fas fa-angle-right'></i>&nbsp;Ansible for DevOps
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/getting-started-with-ansible/" title="Chapter 1 - Getting Started With Ansible" class="dd-item ">
        <a href="/ansible/ansible-for-devops/getting-started-with-ansible/">
        <i class='fas fa-minus'></i>&nbsp;Getting Started With Ansible
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/local-infrastructure-development-ansible-and-vagrant/" title="Chapter 2 - Local Infrastructure Development: Ansible and Vagrant" class="dd-item ">
        <a href="/ansible/ansible-for-devops/local-infrastructure-development-ansible-and-vagrant/">
        <i class='fas fa-minus'></i>&nbsp;Local Infrastructure Development: Ansible and Vagrant
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/ad-hoc-commands/" title="Ad Hoc Commands" class="dd-item ">
        <a href="/ansible/ansible-for-devops/ad-hoc-commands/">
        <i class='fas fa-minus'></i>&nbsp;Ad Hoc Commands
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/ansible-playbooks/" title="Ansible Playbooks" class="dd-item ">
        <a href="/ansible/ansible-for-devops/ansible-playbooks/">
        <i class='fas fa-minus'></i>&nbsp;Ansible Playbooks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/chapter5/" title="Chapter5" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/ansible-for-devops/chapter5/">
          <i class='fas fa-angle-right'></i>&nbsp;Chapter5
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/ansible-playbooks-beyond-the-basics/" title="Ansible Playbooks Beyond the Basics" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/ansible-playbooks-beyond-the-basics/">
        <i class='fas fa-minus'></i>&nbsp;Ansible Playbooks Beyond the Basics
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/handover/" title="Handover" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/handover/">
        <i class='fas fa-minus'></i>&nbsp;Handover
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/environment-variables/" title="Environment Variables" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/environment-variables/">
        <i class='fas fa-minus'></i>&nbsp;Environment Variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/variables/" title="Variables" class="dd-item active">
        <a href="/ansible/ansible-for-devops/chapter5/variables/">
        <i class='fas fa-minus'></i>&nbsp;Variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/conditionals/" title="if/then/when - Conditionals" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/conditionals/">
        <i class='fas fa-minus'></i>&nbsp;if/then/when - Conditionals
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/delegation-local-actions-and-pauses/" title="Delegation Local Actions and Pauses" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/delegation-local-actions-and-pauses/">
        <i class='fas fa-minus'></i>&nbsp;Delegation Local Actions and Pauses
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/prompts/" title="Prompts" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/prompts/">
        <i class='fas fa-minus'></i>&nbsp;Prompts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/tags/" title="Tags" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/tags/">
        <i class='fas fa-minus'></i>&nbsp;Tags
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/summary/" title="Summary" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/summary/">
        <i class='fas fa-minus'></i>&nbsp;Summary
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/chapter6/" title="Chapter6" class="dd-item 
        
        
        
        ">
      <a href="/ansible/ansible-for-devops/chapter6/">
          <i class='fas fa-angle-right'></i>&nbsp;Chapter6
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/create-vm-with-ansible-libvirt/" title="Create Vm With Ansible Libvirt" class="dd-item ">
        <a href="/ansible/create-vm-with-ansible-libvirt/">
        <i class='fas fa-minus'></i>&nbsp;Create Vm With Ansible Libvirt
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ubuntu/" title="Ubuntu" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/">
          <i class='fas fa-angle-right'></i>&nbsp;Ubuntu
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ubuntu/tools/" title="Tools" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/tools/">
          <i class='fas fa-angle-right'></i>&nbsp;Tools
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/tools/tmux/" title="Tmux" class="dd-item ">
        <a href="/ubuntu/tools/tmux/">
        <i class='fas fa-minus'></i>&nbsp;Tmux
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ubuntu/network/" title="Network" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/network/">
          <i class='fas fa-angle-right'></i>&nbsp;Network
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/network/netplan/" title="Netplan으로 static IP 할당받기" class="dd-item ">
        <a href="/ubuntu/network/netplan/">
        <i class='fas fa-minus'></i>&nbsp;Netplan으로 static IP 할당받기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/customize-login-message/" title="Ubuntu의 Login Message 수정하기" class="dd-item ">
        <a href="/ubuntu/customize-login-message/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu의 Login Message 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/start-tmux-after-reboot/" title="reboot 후에 tmux를 실행시켜 원하는 작업을 하기" class="dd-item ">
        <a href="/ubuntu/start-tmux-after-reboot/">
        <i class='fas fa-minus'></i>&nbsp;reboot 후에 tmux를 실행시켜 원하는 작업을 하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/oh-my-zsh-home-end-key/" title="oh-my-zsh에서 home key와 end key가 안될 때 해결방법" class="dd-item ">
        <a href="/ubuntu/oh-my-zsh-home-end-key/">
        <i class='fas fa-minus'></i>&nbsp;oh-my-zsh에서 home key와 end key가 안될 때 해결방법
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/base64-encode-decode/" title="Ubuntu에서 Base64로 인코딩, 디코딩하기" class="dd-item ">
        <a href="/ubuntu/base64-encode-decode/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu에서 Base64로 인코딩, 디코딩하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/file-edit-without-editor/" title="Editor(vi)가 없을 때 파일 수정하기" class="dd-item ">
        <a href="/ubuntu/file-edit-without-editor/">
        <i class='fas fa-minus'></i>&nbsp;Editor(vi)가 없을 때 파일 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/check-listen-port/" title="열려있는 포트 확인하기" class="dd-item ">
        <a href="/ubuntu/check-listen-port/">
        <i class='fas fa-minus'></i>&nbsp;열려있는 포트 확인하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/using-watch-with-pipes/" title="pipe를 사용한 명령어를 watch로 확인하기" class="dd-item ">
        <a href="/ubuntu/using-watch-with-pipes/">
        <i class='fas fa-minus'></i>&nbsp;pipe를 사용한 명령어를 watch로 확인하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/use-alias-in-watch/" title="watch를 사용할 때 alias 이용하기" class="dd-item ">
        <a href="/ubuntu/use-alias-in-watch/">
        <i class='fas fa-minus'></i>&nbsp;watch를 사용할 때 alias 이용하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-without-password/" title="password 없이 ssh 접속하기" class="dd-item ">
        <a href="/ubuntu/ssh-without-password/">
        <i class='fas fa-minus'></i>&nbsp;password 없이 ssh 접속하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-tunneling/" title="SSH Tunneling 사용법" class="dd-item ">
        <a href="/ubuntu/ssh-tunneling/">
        <i class='fas fa-minus'></i>&nbsp;SSH Tunneling 사용법
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-with-jump/" title="Gateway를 이용하여 SSH 접속하기" class="dd-item ">
        <a href="/ubuntu/ssh-with-jump/">
        <i class='fas fa-minus'></i>&nbsp;Gateway를 이용하여 SSH 접속하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/change-hostname/" title="Hostname 변경하기" class="dd-item ">
        <a href="/ubuntu/change-hostname/">
        <i class='fas fa-minus'></i>&nbsp;Hostname 변경하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/unattended-ubuntu/" title="추가 입력절차(prompt) 없이 Ubuntu 설치하는 이미지 만들기" class="dd-item ">
        <a href="/ubuntu/unattended-ubuntu/">
        <i class='fas fa-minus'></i>&nbsp;추가 입력절차(prompt) 없이 Ubuntu 설치하는 이미지 만들기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/how-to-edit-boot-parameter-during-install/" title="Ubuntu 설치 시 Boot Parameter를 수정하기" class="dd-item ">
        <a href="/ubuntu/how-to-edit-boot-parameter-during-install/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu 설치 시 Boot Parameter를 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/how-to-use-sudo-without-password/" title="sudo를 password 없이 사용하기" class="dd-item ">
        <a href="/ubuntu/how-to-use-sudo-without-password/">
        <i class='fas fa-minus'></i>&nbsp;sudo를 password 없이 사용하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/english/" title="English" class="dd-item 
        
        
        
        ">
      <a href="/english/">
          <i class='fas fa-angle-right'></i>&nbsp;English
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/english/himym/" title="HIMYM" class="dd-item 
        
        
        
        ">
      <a href="/english/himym/">
          <i class='fas fa-angle-right'></i>&nbsp;HIMYM
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/english/himym/season1/" title="Season1" class="dd-item 
        
        
        
        ">
      <a href="/english/himym/season1/">
          <i class='fas fa-angle-right'></i>&nbsp;Season1
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/english/himym/season1/episode01/" title="Episode01" class="dd-item ">
        <a href="/english/himym/season1/episode01/">
        <i class='fas fa-minus'></i>&nbsp;Episode01
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/english/himym/season1/episode02/" title="Episode02" class="dd-item ">
        <a href="/english/himym/season1/episode02/">
        <i class='fas fa-minus'></i>&nbsp;Episode02
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/KimMJ"><i class='fab fa-github'></i> Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://learn.netlify.com/en/"><i class='fas fa-bookmark'></i> Hugo Theme Learn</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://kimmj.github.io/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




<div id="docsToc">
  <div class="pi-accordion">
    
    
    
    
    
      
      
    
    
  </div> 
 <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 
© 2020 GitHub, Inc.
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Ibiza</a> > <a href='/ansible/'>Ansible</a> > <a href='/ansible/ansible-for-devops/'>Ansible for DevOps</a> > <a href='/ansible/ansible-for-devops/chapter5/'>Chapter5</a> > Variables
          
         
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#playbook-variables">Playbook variables</a></li>
    <li><a href="#inventory-variables">Inventory variables</a></li>
    <li><a href="#registered-variables">Registered Variables</a></li>
    <li><a href="#accessing-variables">Accessing Variables</a></li>
    <li><a href="#host-and-group-variables">Host and Group variables</a>
      <ul>
        <li><a href="#group_vars-and-host_vars">group_vars and host_vars</a></li>
        <li><a href="#magic-variables-with-host-and-group-variables-and-information">Magic variables with host and group variables and information</a></li>
        <li><a href="#facts-variables-derived-from-system-information">Facts (Variables derived from system information)</a></li>
        <li><a href="#local-facts-factsd">Local Facts (Facts.d)</a></li>
      </ul>
    </li>
    <li><a href="#variable-precedence">Variable Precedence</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/ansible">ansible</a>

  <a class="tag-link" href="/tags/ansible-for-devops">ansible-for-devops</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Variables
            </h1>
          

        



<nav id="TableOfContents">
  <ul>
    <li><a href="#playbook-variables">Playbook variables</a></li>
    <li><a href="#inventory-variables">Inventory variables</a></li>
    <li><a href="#registered-variables">Registered Variables</a></li>
    <li><a href="#accessing-variables">Accessing Variables</a></li>
    <li><a href="#host-and-group-variables">Host and Group variables</a>
      <ul>
        <li><a href="#group_vars-and-host_vars">group_vars and host_vars</a></li>
        <li><a href="#magic-variables-with-host-and-group-variables-and-information">Magic variables with host and group variables and information</a></li>
        <li><a href="#facts-variables-derived-from-system-information">Facts (Variables derived from system information)</a></li>
        <li><a href="#local-facts-factsd">Local Facts (Facts.d)</a></li>
      </ul>
    </li>
    <li><a href="#variable-precedence">Variable Precedence</a></li>
  </ul>
</nav>

<p>Ansible에서의 variable은 대부분의 다른 시스템에서의 variable과 비슷하다.
variable은 항상 글자로 시작하고<code>[A-Za-z]</code> 그 다음부터는 <code>_</code>나 숫자들 <code>[0-9]</code>를 포함할 수 있다.</p>
<p>사용가능한 variable name은 <code>foo</code>, <code>foo_bar</code>, <code>foo_bar_5</code>, <code>fooBar</code>을 포함하지만 표준은 모두 소준자를 사용하고 variable name에서 숫자를 제거하는 것이다(<code>camelCase</code>나 <code>UpperCamelCase</code>를 피한다).</p>
<p>사용불가능한 variable name은 <code>_foo</code>, <code>foo-bar</code>, <code>5-foo-bar</code>, <code>foo bar</code>가 있다.</p>
<p>inventory file에서 variable의 값은 equal sign으로 할당된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#a6e22e">foo</span>=<span style="color:#a6e22e">bar</span>
</code></pre></div><p>playbook이나 파일에 포함된 variable에서는 variable의 value가 colon을 통해 할당된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">foo: bar
</code></pre></div><h2 id="playbook-variables">Playbook variables</h2>
<p>task에서 사용할 variable을 정의하는 방법에는 여러가지가 있다.</p>
<p>variable은 <code>ansible-playbook</code>을 호출할 때 <code>--extra-vars</code> 옵션을 통해 command line을 통해서 전달될 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ansible-playbook exampl.yml --extra-vars <span style="color:#e6db74">&#34;foo=bar&#34;</span>
</code></pre></div><p>JSON, YAML에 quote를 씌워 extra variable을 전달하거나 JSON, YAML 파일을 직접 전달할 수도 있다.
<code>@even_more_vars.json</code>이나 <code>--extra-vars &quot;@even_more_vars.yml</code>처럼 사용하면 된다.
하지만 여기서 아래에 적힌 다른 method를 사용하는 것도 좋을 수 있다.</p>
<p>variable은 <code>vars</code> section에서 playbook의 나머지 부분에 inline을 표함할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- hosts: example
  vars:
    foo: bar
  tasks:
    <span style="color:#75715e"># Prints &#34;Variable &#39;foo&#39; is set to bar&#34;.</span>
    - debug: msg=<span style="color:#e6db74">&#34;Variable &#39;foo&#39; is set to {{ foo }}&#34;</span>
</code></pre></div><p>variable은 또한 별도의 파일에 작성하고 <code>vars_files</code> section에서 포함하게 할 수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
<span style="color:#75715e"># Main playbook file.</span>
- hosts: example
  vars_files:
    - vars.yml
  tasks:
    - debug: msg=<span style="color:#e6db74">&#34;Variable &#39;foo&#39; is set to {{ foo }}&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
<span style="color:#75715e"># Variables file &#39;vars.yml&#39; in the same folder as the playbook.</span>
foo: bar
</code></pre></div><p>모든 variable들이 YAML의 root level로 설정된 것을 인지해야 한다.
standalone file로 포함되는 상황에서는 <code>vars</code>같은 heading이 필요하지 않다.</p>
<p>variable 파일은 상황에 따라 import되게 할수도 있다.
예를 들어 CentOS server에 대한 variable 세트가 있을수 있고(Apache service가 <code>httpd</code>이다) Debian server에서는 다른 세트를 가질 수 있다(Apache service가 <code>apache2</code>이다).
이러한 경우 <code>vars_files</code>를 include할 때 조건을 사용할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- hosts: example
  vars_files:
    - [ <span style="color:#e6db74">&#34;apache_{{ ansible_os_family }}.yml&#34;</span>, <span style="color:#e6db74">&#34;apache_default.yml&#34;</span> ]
  tasks:
    - service: name={{ apache }} state=running
</code></pre></div><p>그러고 난 후 두 파일을 example playbook과 같은 디렉토리에 <code>apache_CentOS.yml</code>과 <code>apache_default.yml</code>로 저장한다.
CentOS 파일에서는 <code>apache: httpd</code>로 설정하고 default 파일에서는 <code>apache: apache2</code>로 설정한다.</p>
<p>remote server가 <code>facter</code>나 <code>ohai</code>가 설치되어 있는 한 Ansible은 server의 OS를 읽을 수 있게 되고 이를 variable로 변경(<code>ansible_os_family</code>)하여 resulting name을 가지고 vars file을 포함시킬 수 있다.
Ansible이 파일의 이름을 그 이름으로 찾지 못한다면 두번째 옵션(<code>apache_default.yml</code>)을 사용할 것이다.
따라서 Debian이나 Ubuntu server에서 Ansible은 <code>apache_Debian.yml</code>이나 <code>apache_Ubuntu.yml</code> 파일이 없더라도 <code>apache2</code>를 서비스 이름으로 사용할 수 있을 것이다.</p>
<h2 id="inventory-variables">Inventory variables</h2>
<p>variable은 Ansible inventory file의 host definition이 있는 줄이나 group에 대해 정의한 것을 통해서도 추가될 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#75715e"># Host-specific variables (defined inline).</span>
[<span style="color:#a6e22e">washington</span>]
<span style="color:#a6e22e">app1</span>.<span style="color:#a6e22e">example</span>.<span style="color:#a6e22e">com</span> <span style="color:#a6e22e">proxy_state</span>=<span style="color:#a6e22e">present</span>
<span style="color:#a6e22e">app2</span>.<span style="color:#a6e22e">example</span>.<span style="color:#a6e22e">com</span> <span style="color:#a6e22e">proxy_state</span>=<span style="color:#a6e22e">absent</span>

<span style="color:#75715e"># Variables defined for the entire group</span>
[<span style="color:#a6e22e">washington</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#a6e22e">vars</span>]
<span style="color:#a6e22e">cdn_host</span>=<span style="color:#a6e22e">washington</span>.<span style="color:#a6e22e">static</span>.<span style="color:#a6e22e">example</span>.<span style="color:#a6e22e">com</span>
<span style="color:#a6e22e">api_version</span>=<span style="color:#ae81ff">3.0</span>.<span style="color:#ae81ff">1</span>
</code></pre></div><p>더 많은 variable을 정의하고자 한다면, 특히 한 두개 이상의 호스트에 variable을 적용하려고 한다면 inventory file을 사용하는 것은 성가신 일일 수 있다.
사실 Ansible의 documentation에서는 inventory에 variable을 저장하지 않는 것을 권장한다.
대신에 <code>group_vars</code>와 <code>host_vars</code> YAML variable file을 특정한 위치에 놓으면 Ansible이 이를 개별 호스트와 inventory에 정의된 group에 적용하게 된다.</p>
<p>예를 들어 <code>app1.example.com</code> 호스트에 variable 설정을 적용하려 한다면 <code>app1.example.com</code>이라는 이름으로 빈 파일을 생성하고 이를 <code>/etc/ansible/host_vars/app1.example.com</code>에 위치한뒤 <code>vars_files</code> YAML에 넣고싶은 variable을 추가하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">foo: bar
baz: qux
</code></pre></div><p>variable들을 전체 <code>washington</code> group에 대해 적용하고 싶으면 <code>/etc/ansible/group_vars/washington</code>에 비슷한 파일을 생성하면 된다(<code>washington</code>은 사용하고싶은 group으로 변경하면 된다).</p>
<p>이 파일들을 같은 이름으로 playbook 디렉토리의 <code>host_vars</code>나 <code>group_vars</code> 디렉토리 안에 놓아도 된다.
Ansible은 <code>/etc/ansible/[host|group]_vars</code> 디렉토리에 있는 inventory에 정의된 variable을 먼저 사용한 뒤 playbook directory에 정의되어 있는 variable을 사용하게 될 것이다.</p>
<p><code>host_vars</code>와 <code>group_vars</code>를 사용하는 것의 다른 대안책은 위에서 언급했듯이 conditional variable file을 사용하는 것이다.</p>
<h2 id="registered-variables">Registered Variables</h2>
<p>command를 실행하고 나서 이 return code나 stderr, stdout을 가지고 다음 task를 진행할지 결정해야하는 상황이 많이 있을 것이다.
이러한 상황에서 Ansible은 <code>register</code>를 사용하여 runtime에 특정 command의 output을 variable로 저장하는 기능을 가지고 있다.</p>
<p>이전 챕터에서 <code>register</code>를 통해 <code>forever list</code> command의 ouput을 가지고 Node.js app을 시작해야하 하는지 결정할 때 사용했다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- name: <span style="color:#e6db74">&#34;Node: Check list of Node.js apps running.&#34;</span>
  command: forever list
  register: forever_list
  changed_when: <span style="color:#66d9ef">false</span>

- name: <span style="color:#e6db74">&#34;Node: Start example Node.js app.&#34;</span>
  command: forever start {{ node_apps_location }}/app/app.js
  when: <span style="color:#e6db74">&#34;forever_list.stdout.find(&#39;{{ node_apps_location }}/app/app.js&#39;) == -1&#34;</span>
</code></pre></div><p>이 예시에서 우리는 Python에 내장된 string function(<code>find</code>)을 사용하여 app의 위치를 검색하고 존재하지 않을경우 Node.js app을 시작한다.</p>
<p><code>register</code>에 대해서는 이번 챕터의 뒷부분에서 알아보도록 하자.</p>
<h2 id="accessing-variables">Accessing Variables</h2>
<p>간단한 variable(Ansible에 의해서 수집되는 inventory 파일 또는 playbook이나 variable file에 정의된 것들)은 <code>{{ variable }}</code>과 같은 문법을 사용하여 task 안에서 사용할 수 있다.
예를 들면 다음과 같다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- command: /opt/my-app/rebuild {{ my_environment }}
</code></pre></div><p>command가 동작하면 Ansible은 <code>my_environment</code>의 내용을 <code>{{ my_environment }}</code>로 대치할 것이다.
그러면 결과적으로 command는 <code>/opt/my-app/rebuild dev</code>처럼 될 것이다.</p>
<p>사용할만한 많은 variable들은 array(또는 리스트)로 구조화될 수 있고 <code>foo</code> array에 접근하는 것은 information에 대해 충분한 정보를 제공하지 않는다(Ansible이 <code>with_items</code>처럼 전체 array를 사용해야하는 상황을 제외하곤).</p>
<p>아래와 같이 variable의 리스트를 정의했다고 해보자.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">foo_list:
  - one
  - two
  - three
</code></pre></div><p>해당 array에 있는 첫번째 아이템에 다음과 같이 접근할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">foo[<span style="color:#ae81ff">0</span>]
foo|first
</code></pre></div><p>첫번째 줄은 Python에서 array에 접근하는 문법(array의 첫번째 element, 0번째 index를 불러오기)과 동일하지만 두번째 줄은 Jinja2가 제공하는 filter를 사용한 것이다.
둘 다 유효한 문법이며 유용하며 둘 중 하나를 고르는 것은 전적으로 사용자에게 달려있다.</p>
<p>더 크고 구조화된 array에 대해서(예를 들어 Ansible이 server에서 얻어온 서버의 IP 주소를 받아오는 것) 우리는 <code>[]</code>이나 <code>.</code>을 이용하여 어떤 array의 key에도 접근할 수가 있다.
예를 들어 <code>eth0</code> network interface에 대한 정보를 얻고싶으면 먼저 playbook의 <code>debug</code>를 이용하여 전체 array를 살펴보면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#In your playbook.</span>
task:
  - debug: var=ansible_eth0
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">TASK: <span style="color:#f92672">[</span>debug var<span style="color:#f92672">=</span>ansible_eth0<span style="color:#f92672">]</span> *****************************************
ok: <span style="color:#f92672">[</span>webserver<span style="color:#f92672">]</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;ansible_eth0&#34;</span>: <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;active&#34;</span>: true,
    <span style="color:#e6db74">&#34;device&#34;</span>: <span style="color:#e6db74">&#34;eth0&#34;</span>,
    <span style="color:#e6db74">&#34;ipv4&#34;</span>: <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;address&#34;</span>: <span style="color:#e6db74">&#34;10.0.2.15&#34;</span>,
    <span style="color:#e6db74">&#34;netmask&#34;</span>: <span style="color:#e6db74">&#34;255.255.255.0&#34;</span>,
    <span style="color:#e6db74">&#34;network&#34;</span>: <span style="color:#e6db74">&#34;10.0.2.0&#34;</span>
  <span style="color:#f92672">}</span>,
  <span style="color:#e6db74">&#34;ipv6&#34;</span>: <span style="color:#f92672">[</span>
    <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;address&#34;</span>: <span style="color:#e6db74">&#34;fe80::a00:27ff:feb1:589a&#34;</span>,
    <span style="color:#e6db74">&#34;prefix&#34;</span>: <span style="color:#e6db74">&#34;64&#34;</span>,
    <span style="color:#e6db74">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;link&#34;</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">]</span>,
  <span style="color:#e6db74">&#34;macaddress&#34;</span>: <span style="color:#e6db74">&#34;08:00:27:b1:58:9a&#34;</span>,
  <span style="color:#e6db74">&#34;module&#34;</span>: <span style="color:#e6db74">&#34;e1000&#34;</span>,
  <span style="color:#e6db74">&#34;mtu&#34;</span>: 1500,
  <span style="color:#e6db74">&#34;promisc&#34;</span>: false,
  <span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;ether&#34;</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>이제 전반적인 variable에 대한 구조를 알게되었으니 다음의 테크닉을 통해 서버의 IPv4 주소만 얻어올 수 있다.</p>
<pre><code class="language-jinja2" data-lang="jinja2">{{ ansible_eth0.ipv4.address }}
{{ ansible_eth0['ipv4']['address']}}
</code></pre><h2 id="host-and-group-variables">Host and Group variables</h2>
<p>Ansible은 host별, group별 variable들을 쉽게 정의하거나 override할 수 있다.
앞에서 배운 것처럼 inventory file은 group과 host를 다음과 같이 정의할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">group</span>]
<span style="color:#a6e22e">host1</span>
<span style="color:#a6e22e">host2</span>
</code></pre></div><p>host별 또는 group별로 variable을 정의하는 가장 쉬운 방법은 inventory file 안에서 직접 할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">group</span>]
<span style="color:#a6e22e">host1</span> <span style="color:#a6e22e">admin_user</span>=<span style="color:#a6e22e">jane</span>
<span style="color:#a6e22e">host2</span> <span style="color:#a6e22e">admin_user</span>=<span style="color:#a6e22e">jack</span>
<span style="color:#a6e22e">host3</span>

[<span style="color:#a6e22e">group</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#a6e22e">vars</span>]
<span style="color:#a6e22e">admin_user</span>=<span style="color:#a6e22e">john</span>
</code></pre></div><p>이 경우 Ansible은 default variable &lsquo;john'을 <code>{{ admin_user }}</code>에 대해 사용하지만 <code>host</code>과 <code>host2</code>의 경우 hostname 옆에 정의된 admin user를 사용하게 될 것이다.</p>
<p>이는 variable을 정의하거나 각 host별 또는 각 group별로 정의할 때 간편하고 잘 작동하지만 더 복잡한 playbook의 경우 host-specific한 variable을 몇가지(3+) 더 추가해야할 수도 있다.
이런 상황에서 유지보수와 가독성을 위해 다른 파일에 variable을 정의하는 것이 더 쉬울 것이다.</p>
<h3 id="group_vars-and-host_vars"><code>group_vars</code> and <code>host_vars</code></h3>
<p>Ansible은 inventory file(또는 <code>/etc/ansible/hosts</code>에 있는 default inventory file을 사용한다면 <code>/etc/ansible</code> 내부)과 같은 위치에서 <code>group_vars</code>와 <code>host_vars</code> 디렉토리를 검색할 것이다.</p>
<p>이 디렉토리 안에 inventory file에서 정의된 group name 또는 hostname을 따라 이름지어 YAML 파일을 저장하면 된다.
위의 예시에서 계속해서 이 specific variable들을 옮겨보도록 하자.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
<span style="color:#75715e"># File: /etc/ansible/group_vars/group</span>
admin_user: john
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># File: /etc/ansible/host_vars/host1</span>
anmin_user: jane
</code></pre></div><p>default inventory file(또는 playbook의 root directory 바깥에 있는 inventory file)을 사용한다고 하더라도 Ansible은 playbook 안에 있는 <code>group_vars</code>와 <code>host_vars</code> 디렉토리 내부의 host, group variable file들도 사용한다.
이는 전체 playbook과 infrastructure configuration을 모든 host/group-specific configuration을 포함하는 source-control repository에 패키징할 때 편리하게 사용할 수 있다.</p>
<p>또한 <code>group_vars/all</code> 파일을 정의하여 <code>all</code> group에 대해 적용할 수 있고 또한 <code>host_vars/all</code> 파일을 통해 <code>all</code> host에 대해 적용할 수도 있다.
하지만 보통은 playbook과 role 안에 sane default를 정의하는 것이 더 좋다(나중에 더 이야기해보도록 한다).</p>
<h3 id="magic-variables-with-host-and-group-variables-and-information">Magic variables with host and group variables and information</h3>
<p>특정한 host의 variable을 다른 host에서 얻어오고자 한다면 Ansible은 magic <code>hostvars</code> variable을 제공하여 (inventory file과 <code>host_vars</code> 디렉토리에 있는 YAML file 들에서) 정의된 host variable들을 불러올 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># From any host, returns &#34;jane&#34;.</span>
{{ hostvars[<span style="color:#e6db74">&#39;host1&#39;</span>][<span style="color:#e6db74">&#39;admin_user&#39;</span>] }}
</code></pre></div><p>이것 외에도 때때로 사용할 수 있는 variable들을 Ansible이 제공해준다.</p>
<ul>
<li><code>groups</code>: inventory 안에 있는 모든 group name의 list</li>
<li><code>group_names</code>: <em>current</em> host가 속한 모든 그룹들의 리스트</li>
<li><code>inventory_hostname</code>: <code>inventory</code>에 따른 현재 host의 hostname(이는 system이 제공하는 hostname인 <code>ansible_hostname</code>과는 다른 값일 수 있다).</li>
<li><code>inventory_hostname_short</code>: <code>inventory_hostname</code>의 첫번째 부분.</li>
<li><code>play_hosts</code>: 현재 play가 실행될 모든 host</li>
</ul>
<p>Ansible의 official documentation에서 <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#magic-variables-and-how-to-access-information-about-other-hosts">Magic Variables, and How To Access Information About Other Hosts</a>를 참조하여 최신 정보와 사례를 확인해 보아라.</p>
<h3 id="facts-variables-derived-from-system-information">Facts (Variables derived from system information)</h3>
<p>default로 Ansible playbook을 실행할 때마다 Ansible은 play를 하는 각 host의 information(<code>facts</code>)을 수집한다.
이전 chapter에서 playbook을 실행할 때마다 다음과 같은 것을 보았을 것이다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ansible-playboook playbook.yml

PLAY <span style="color:#f92672">[</span>group<span style="color:#f92672">]</span> **********************************************************

GATHERING FACTS *******************************************************
ok: <span style="color:#f92672">[</span>host1<span style="color:#f92672">]</span>
ok: <span style="color:#f92672">[</span>host2<span style="color:#f92672">]</span>
ok: <span style="color:#f92672">[</span>host3<span style="color:#f92672">]</span>
</code></pre></div><p>Fact는 playbook을 실행할 때 매우 유용하다.
우리는 특정 task를 수행할 때 또는 configuration file안의 특정 정보를 수정하기 위해 host IP address나 CPU type, disk space, OS information, network interface information같은 정보를 수집할 수 있다.</p>
<p>사용할 수 있는 모든 fact에 대한 list를 얻으려면 <code>ansible</code> command에 <code>setup</code> module을 더해 사용하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ansible munin -b setup
munin.midwesternmac.com | success &gt;&gt; <span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;ansible_facts&#34;</span>: <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;ansible_all_ipv4_addresses&#34;</span>: <span style="color:#f92672">[</span>
      <span style="color:#e6db74">&#34;167.88.120.81&#34;</span>
    <span style="color:#f92672">]</span>,
  <span style="color:#e6db74">&#34;ansible_all_ipv6_addresses&#34;</span>:
    <span style="color:#e6db74">&#34;2604:180::a302:9076&#34;</span>,
<span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
</code></pre></div><p>fact를 사용할 필요가 없고 playbook을 실행할 때 조금의 시간이라도 단축하고 싶으면(수십, 수백개의 서버에 대해 Ansible playbook을 돌릴 때 유용할 것이다) playbook에서 <code>gather_facts: no</code>를 설정하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- hosts: db
  gather_facts: no
</code></pre></div><p>저자가 사용하는 많은 playbook과 role은 <code>ansible_os_family</code>, <code>ansible_hostname</code>, <code>ansible_memtotal_mb</code>와 같은 fact를 사용하여 새로운 variable을 등록하거나 <code>when</code>과 함께 사용하여 특정한 task를 실행하도록 조건문을 걸어준다.</p>

<div class="notices notes" ><p>Factor나 Ohai가 remote host에 설치되어 있다면 Ansible은 여기서 수집된 fact 또한 <code>facter_</code>와 <code>ohai_</code> prefix를 통해 각각 include할 수 있다.
Ansible을 Puppet이나 Chef와 함께 사용할 경우 이러한 system-information-gathering tool에 대해 이미 친숙할 것이고 Ansible에서도 편하게 이것들을 사용할 수 있을 것이다.
그렇지 않다면 Ansible의 Fact는 어떤 것을 하던지 충분할 것이고 Local Facts를 통해 더 유연하게도 할 수 있다.</p>
</div>


<div class="notices notes" ><p>playbook을 비슷한 서버나 VM(예를 들어 모든 서버가 동일한 OS에서 실행하고 동일한 hosting provider인 경우)에서 실행한다면 fact는 거의 동일할 것이다.
playbook을 다양한 set의 host(예를 들어 다른 OS들, 다른 virtualization stack, hosting provider일 경우)에 대해서 실행할 때 몇몇 fact는 예상하는 것과는 다른 information을 포함할 수 있다.
Server Check.in에서 5개보다 많은 hosting provider, 다양한 hardware를 가진 server를 보유하고 있어 특히 새로운 서버를 추가할 때 <code>ansible-playbook</code>의 결과들을 모니터해야 한다.</p>
</div>

<h3 id="local-facts-factsd">Local Facts (Facts.d)</h3>
<p>host-specific fact를 정의하는 다른 방법은 <code>.fact</code> file을 remote host의 특정한 디렉토리, <code>/etc/ansible/facts.d/</code>에 넣는 것이다.
이 파일들은 JSON이나 INI 파일이 될 수 있고 또는 JSON을 리턴하는 실행파일을 사용할수도 있다.
예를 들어 <code>/etc/ansible/facts.d/settings.fact</code>를 remote host에 생성하고 다음의 내용을 작성한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">users</span>]
<span style="color:#a6e22e">admin</span>=<span style="color:#a6e22e">jane</span>,<span style="color:#a6e22e">john</span>
<span style="color:#a6e22e">normal</span>=<span style="color:#a6e22e">jim</span>
</code></pre></div><p>그 다음 Ansible의 <code>setup</code> module을 사용하여 remote host에서 새로운 fact를 표시한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ansible hostname -m setup -a <span style="color:#e6db74">&#34;filter=ansible_local&#34;</span>
munin.midwesternmac.com | success &gt;&gt; <span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;ansible_facts&#34;</span>: <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;ansible_local&#34;</span>: <span style="color:#f92672">{</span>
      <span style="color:#e6db74">&#34;settings&#34;</span>: <span style="color:#f92672">{</span>
        <span style="color:#e6db74">&#34;users&#34;</span>: <span style="color:#f92672">{</span>
          <span style="color:#e6db74">&#34;admin&#34;</span>: <span style="color:#e6db74">&#34;jane,john&#34;</span>,
          <span style="color:#e6db74">&#34;normal&#34;</span>: <span style="color:#e6db74">&#34;jim&#34;</span>
        <span style="color:#f92672">}</span>
      <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>,
  <span style="color:#e6db74">&#34;changed&#34;</span>: false
<span style="color:#f92672">}</span>
</code></pre></div><p>playbook을 사용하여 새로운 서버를 provision 하고, playbook 안에서 나중에 사용할 local fact를 생성하는 <code>.fact</code> file을 추가한다면 Ansible에게 다음과 같이 local fact를 불러오라고 명시적으로 알려주어야 한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- name: Reload local facts.
  setup: filter=ansible_local
</code></pre></div>
<div class="notices warning" ><p><code>host_vars</code>나 다른 variable definition 방법에 비해 local fact를 사용하는 것을 권장하긴 하지만 playbook이 각 host의 특정한 detail에 대해 의존하지 않도록 만드는 것이 훨씬 더 좋다.
때로 반드시 local fact(특히 facts.d에 있는 실행파일을 사용하여 local environment을 기반으로 fact를 정의하는 경우)를 사용해야 하지만 언제나 configuration을 중앙 repository에 두는 것이 더 좋은 방법이고 host-specific fact로부터 벗어나야 한다.</p>
</div>


<div class="notices warning" ><p><code>setup</code> module 옵션(<code>filter</code> 처럼)은 Windows host에 대해서는 사용할 수 없다는 것에 주의하라.</p>
</div>

<h2 id="variable-precedence">Variable Precedence</h2>
<p>5개의 다른 place에서 동일한 variable을 정의하였을 때어떤 variable이 사용되고 있는지에 대한 자세한 사항을 파고드는 경우는 드물 것이다.
그러나 만일을 대비하여 Ansible documentation에서는 다음과 같은 순서를 사용한다.</p>
<ol>
<li>command line을 통해 전달된 variable(<code>-e</code> option)이 항상 승리한다.</li>
<li>inventory에 정의된 variable connection (<code>ansible_ssh_user</code> 등)</li>
<li>대부분의 모든 것 (command line switch, play에 정의된 variable, 내장된 variable, role variable 등)</li>
<li>나머지(non-connection) inventory variable들</li>
<li>local fact와 자동으로 발견된 fact들 (<code>gather_facts</code>를 통해)</li>
<li>Role의 default variable (role의 <code>defaults/main.yml</code> 파일에 있는 것)</li>
</ol>
<p>playbook, role을 만들고 inventory를 관리를 많이 하게되면 우리가 원하는 variable definition의 알맞은 조합을 찾게 될것이지만 play별, host별, run별로 variable을 setting하고 overriding하는데 드는 고통을 줄이기 위한 몇가지 사항들이 있다.</p>
<ul>
<li>Role(다음 챕터에서 이야기 해보도록 하자)은 role의 <code>default</code> variable을 통해 sane default를 제공해야 한다.
이 variable들은 어디에도 variable이 정의되지 않았을 때 사용될 것이다.</li>
<li>playbook은 variable을 거의 정의하면 안된다(예를 들어 <code>set_facts</code>를 통해).
그 대신에 variable은 <code>vars_files</code>를 include 하거나 또는 inventory를 통해 사용되어야 한다.</li>
<li>오직 신뢰할 수 있는 host_specific 또는 group-specific variable들만 host나 group inventory에 정의되어야 한다.</li>
<li>dynamic, static inventory source는 특정 playbook을 유지보수하는 데 잘 확인하지 않는 상황에서 특히 최소한의 variable을 포함해야 한다.</li>
<li>command line variable(<code>-e</code>)는 반드시 가능한한 피해야한다.
이걸 주로 사용하는 하나의 예는 실행하는 task의 유지보수성이나 idempotence를 걱정할 필요가 없는 local testing이나 one-off playbook을 실행하는 것이다.</li>
</ul>
<p>Ansible의 <a href="http://docs.ansible.com/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable">Variable Precedence</a> documentation을 통해 더 자세한 사항과 예시를 확인하라.</p>


<footer class=" footline" >
	
</footer>


        
            <div id="utterance">    
    <script src="https://utteranc.es/client.js"
            repo="kimmj/kimmj.github.io"
            issue-term="pathname"
            label="comments"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
</div>
        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1593265576"></script>
    <script src="/js/perfect-scrollbar.min.js?1593265576"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1593265576"></script>
    <script src="/js/jquery.sticky.js?1593265576"></script>
    <script src="/js/featherlight.min.js?1593265576"></script>
    <script src="/js/highlight.pack.js?1593265576"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1593265576"></script>
    <script src="/js/learn.js?1593265576"></script>
    <script src="/js/hugo-learn.js?1593265576"></script>

    <link href="/mermaid/mermaid.css?1593265576" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1593265576"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
    

  </body>
</html>

