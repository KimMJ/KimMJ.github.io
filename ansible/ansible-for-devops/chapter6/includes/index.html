<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.62.2" />
    <meta name="description" content="Do Learn">
<meta name="author" content="Myeongjin Kim">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Includes :: Ibiza</title>

    
    <link href="/css/nucleus.css?1601133350" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1601133350" rel="stylesheet">
    <link href="/css/hybrid.css?1601133350" rel="stylesheet">
    <link href="/css/featherlight.min.css?1601133350" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1601133350" rel="stylesheet">
    <link href="/css/auto-complete.css?1601133350" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1601133350" rel="stylesheet">
    <link href="/css/theme.css?1601133350" rel="stylesheet">
    <link href="/css/hugo-theme.css?1601133350" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1601133350" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1601133350"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-159865175-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script data-ad-client="ca-pub-1788337254638181" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>
  <body class="" data-url="/ansible/ansible-for-devops/chapter6/includes/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div >
<img src="https://avatars3.githubusercontent.com/u/6358016?s=460&v=4" style="border-radius: 50%; opacity: 0;"  width="50%" height="50%"/>
</div>
<h3 margin="100px"><p style="color: white">Ibiza</p></h3>
<p style="color: white">기록하는 습관</p>
    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/harbor/" title="Harbor" class="dd-item 
        
        
        
        ">
      <a href="/harbor/">
          <i class='fas fa-angle-right'></i>&nbsp;Harbor
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/harbor/install/" title="Harbor 설치" class="dd-item ">
        <a href="/harbor/install/">
        <i class='fas fa-minus'></i>&nbsp;Harbor 설치
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/git/" title="Git" class="dd-item 
        
        
        
        ">
      <a href="/git/">
          <i class='fas fa-angle-right'></i>&nbsp;Git
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/git/git-secret/" title="git-secret을 통한 github 파일 암호화" class="dd-item ">
        <a href="/git/git-secret/">
        <i class='fas fa-minus'></i>&nbsp;git-secret을 통한 github 파일 암호화
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/git/gitignore/" title="Gitignore 설정" class="dd-item ">
        <a href="/git/gitignore/">
        <i class='fas fa-minus'></i>&nbsp;Gitignore 설정
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/python/" title="Python" class="dd-item 
        
        
        
        ">
      <a href="/python/">
          <i class='fas fa-angle-right'></i>&nbsp;Python
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/python/python-beautiful-cli/" title="[번역]Python을 통해 이쁜 CLI 만들기" class="dd-item ">
        <a href="/python/python-beautiful-cli/">
        <i class='fas fa-minus'></i>&nbsp;[번역]Python을 통해 이쁜 CLI 만들기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docker/" title="Docker" class="dd-item 
        
        
        
        ">
      <a href="/docker/">
          <i class='fas fa-angle-right'></i>&nbsp;Docker
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/insecure-registry/" title="http를 사용하는 docker registry를 위한 insecure registry 설정" class="dd-item ">
        <a href="/docker/insecure-registry/">
        <i class='fas fa-minus'></i>&nbsp;http를 사용하는 docker registry를 위한 insecure registry 설정
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/use-docker-without-sudo/" title="Docker를 sudo없이 실행하기" class="dd-item ">
        <a href="/docker/use-docker-without-sudo/">
        <i class='fas fa-minus'></i>&nbsp;Docker를 sudo없이 실행하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/connect-container-to-container/" title="[docker-compose] container에서 다른 container로 접속하기" class="dd-item ">
        <a href="/docker/connect-container-to-container/">
        <i class='fas fa-minus'></i>&nbsp;[docker-compose] container에서 다른 container로 접속하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/jenkins/" title="Jenkins" class="dd-item 
        
        
        
        ">
      <a href="/jenkins/">
          <i class='fas fa-angle-right'></i>&nbsp;Jenkins
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/jenkins/install/" title="Jenkins Install" class="dd-item ">
        <a href="/jenkins/install/">
        <i class='fas fa-minus'></i>&nbsp;Install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/jenkins/workspace-list/" title="Workspace@2를 변경하기 - Workspace List 설정 변경" class="dd-item ">
        <a href="/jenkins/workspace-list/">
        <i class='fas fa-minus'></i>&nbsp;Workspace@2를 변경하기 - Workspace List 설정 변경
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/iac/" title="IaC" class="dd-item 
        
        
        
        ">
      <a href="/iac/">
          <i class='fas fa-angle-right'></i>&nbsp;IaC
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/iac/translate-what-is-infrastructure-as-a-code/" title="[번역] What Is Infrastructure as a Code? How It Works, Best Practices, Tutorials" class="dd-item ">
        <a href="/iac/translate-what-is-infrastructure-as-a-code/">
        <i class='fas fa-minus'></i>&nbsp;[Translate] What Is Infrastructure as a Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cicd/" title="CICD" class="dd-item 
        
        
        
        ">
      <a href="/cicd/">
          <i class='fas fa-angle-right'></i>&nbsp;CICD
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cicd/deploy-strategy/" title="Deploy Strategy" class="dd-item ">
        <a href="/cicd/deploy-strategy/">
        <i class='fas fa-minus'></i>&nbsp;Deploy Strategy
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/css/" title="CSS" class="dd-item 
        
        
        
        ">
      <a href="/css/">
          <i class='fas fa-angle-right'></i>&nbsp;CSS
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/css/background-img-darken/" title="background image 어둡게 하기" class="dd-item ">
        <a href="/css/background-img-darken/">
        <i class='fas fa-minus'></i>&nbsp;background image 어둡게 하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/css/greater-than-sign/" title="Greater Than Sign" class="dd-item ">
        <a href="/css/greater-than-sign/">
        <i class='fas fa-minus'></i>&nbsp;Greater Than Sign
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/prometheus/" title="Prometheus" class="dd-item 
        
        
        
        ">
      <a href="/prometheus/">
          <i class='fas fa-angle-right'></i>&nbsp;Prometheus
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/prometheus/install/" title="Install Prometheus" class="dd-item ">
        <a href="/prometheus/install/">
        <i class='fas fa-minus'></i>&nbsp;Install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/prometheus/federation/" title="Federation" class="dd-item ">
        <a href="/prometheus/federation/">
        <i class='fas fa-minus'></i>&nbsp;Federation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/kubernetes/" title="Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/">
          <i class='fas fa-angle-right'></i>&nbsp;Kubernetes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/installation/" title="Install" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/installation/">
          <i class='fas fa-angle-right'></i>&nbsp;Install
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/overview/" title="Overview" class="dd-item ">
        <a href="/kubernetes/installation/overview/">
        <i class='fas fa-minus'></i>&nbsp;Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/install-kubeadm/" title="Install Kubeadm" class="dd-item ">
        <a href="/kubernetes/installation/install-kubeadm/">
        <i class='fas fa-minus'></i>&nbsp;Install Kubeadm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/installation/create-a-single-control-plane-cluster-with-kubeadm/" title="Create a Single Control Plane Cluster With Kubeadm" class="dd-item ">
        <a href="/kubernetes/installation/create-a-single-control-plane-cluster-with-kubeadm/">
        <i class='fas fa-minus'></i>&nbsp;Create a Single Control Plane Cluster With Kubeadm
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/cka-study/" title="CKA Study" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/cka-study/">
          <i class='fas fa-angle-right'></i>&nbsp;CKA Study
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/14-other-topics/" title="14 Other Topics" class="dd-item ">
        <a href="/kubernetes/cka-study/14-other-topics/">
        <i class='fas fa-minus'></i>&nbsp;14 Other Topics
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/13-troubleshooting/" title="13 Troubleshooting" class="dd-item ">
        <a href="/kubernetes/cka-study/13-troubleshooting/">
        <i class='fas fa-minus'></i>&nbsp;13 Troubleshooting
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/12-end-to-end-tests-on-a-kubernetes-cluster/" title="12 End to End Tests on a Kubernetes Cluster" class="dd-item ">
        <a href="/kubernetes/cka-study/12-end-to-end-tests-on-a-kubernetes-cluster/">
        <i class='fas fa-minus'></i>&nbsp;12 End to End Tests on a Kubernetes Cluster
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/10-kubernetes-the-hard-way/" title="10 Kubernetes the Hard Way" class="dd-item ">
        <a href="/kubernetes/cka-study/10-kubernetes-the-hard-way/">
        <i class='fas fa-minus'></i>&nbsp;10 Kubernetes the Hard Way
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/09-networking/" title="09 Networking" class="dd-item ">
        <a href="/kubernetes/cka-study/09-networking/">
        <i class='fas fa-minus'></i>&nbsp;09 Networking
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/08-storage/" title="08 Storage" class="dd-item ">
        <a href="/kubernetes/cka-study/08-storage/">
        <i class='fas fa-minus'></i>&nbsp;08 Storage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/07-security/" title="07 Security" class="dd-item ">
        <a href="/kubernetes/cka-study/07-security/">
        <i class='fas fa-minus'></i>&nbsp;07 Security
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/06-cluster-maintenance/" title="06 Cluster Maintenance" class="dd-item ">
        <a href="/kubernetes/cka-study/06-cluster-maintenance/">
        <i class='fas fa-minus'></i>&nbsp;06 Cluster Maintenance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/05-application-lifecycle-management/" title="05 Application Lifecycle Management" class="dd-item ">
        <a href="/kubernetes/cka-study/05-application-lifecycle-management/">
        <i class='fas fa-minus'></i>&nbsp;05 Application Lifecycle Management
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/04-logging-and-monitoring/" title="04 Logging and Monitoring" class="dd-item ">
        <a href="/kubernetes/cka-study/04-logging-and-monitoring/">
        <i class='fas fa-minus'></i>&nbsp;04 Logging and Monitoring
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/03-scheduling/" title="03 Scheduling" class="dd-item ">
        <a href="/kubernetes/cka-study/03-scheduling/">
        <i class='fas fa-minus'></i>&nbsp;03 Scheduling
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-study/02-core-concepts/" title="02 Core Concepts" class="dd-item ">
        <a href="/kubernetes/cka-study/02-core-concepts/">
        <i class='fas fa-minus'></i>&nbsp;02 Core Concepts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/kubernetes/concepts/" title="Concepts" class="dd-item 
        
        
        
        ">
      <a href="/kubernetes/concepts/">
          <i class='fas fa-angle-right'></i>&nbsp;Concepts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/concepts/controllers-overview/" title="Controllers Overview" class="dd-item ">
        <a href="/kubernetes/concepts/controllers-overview/">
        <i class='fas fa-minus'></i>&nbsp;Controllers Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/concepts/services/" title="Services" class="dd-item ">
        <a href="/kubernetes/concepts/services/">
        <i class='fas fa-minus'></i>&nbsp;Services
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/concepts/pods/" title="Pods" class="dd-item ">
        <a href="/kubernetes/concepts/pods/">
        <i class='fas fa-minus'></i>&nbsp;Pods
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/cka-epilogue/" title="CKA: Certified Kubernetes Administrator 취득 후기" class="dd-item ">
        <a href="/kubernetes/cka-epilogue/">
        <i class='fas fa-minus'></i>&nbsp;CKA: Certified Kubernetes Administrator 취득 후기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/port-targetport-nodeport-in-kubernetes/" title="[번역] 쿠버네티스에서의 Port, TargetPort, NodePort" class="dd-item ">
        <a href="/kubernetes/port-targetport-nodeport-in-kubernetes/">
        <i class='fas fa-minus'></i>&nbsp;[번역] 쿠버네티스에서의 Port, TargetPort, NodePort
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/kubernetes/stern/" title="Stern을 이용하여 여러 pod의 log를 한번에 확인하기" class="dd-item ">
        <a href="/kubernetes/stern/">
        <i class='fas fa-minus'></i>&nbsp;Stern을 이용하여 여러 pod의 log를 한번에 확인하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/hugo/" title="Hugo" class="dd-item 
        
        
        
        ">
      <a href="/hugo/">
          <i class='fas fa-angle-right'></i>&nbsp;Hugo
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/hugo/ibiza/" title="Ibiza" class="dd-item 
        
        
        
        ">
      <a href="/hugo/ibiza/">
          <i class='fas fa-angle-right'></i>&nbsp;Ibiza
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/hugo/ibiza/font-change/" title="Font Change" class="dd-item ">
        <a href="/hugo/ibiza/font-change/">
        <i class='fas fa-minus'></i>&nbsp;Font Change
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/google-analytics/" title="Hugo에 Google Analytics 적용하기" class="dd-item ">
        <a href="/hugo/google-analytics/">
        <i class='fas fa-minus'></i>&nbsp;Hugo에 Google Analytics 적용하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/insert-comment/" title="Hugo에 Comment 추가하기 (Utterance)" class="dd-item ">
        <a href="/hugo/insert-comment/">
        <i class='fas fa-minus'></i>&nbsp;Hugo에 Comment 추가하기 (Utterance)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo/hugo-with-html/" title="HUGO로 HTML이 되지 않을 때 가능하게 하는 방법" class="dd-item ">
        <a href="/hugo/hugo-with-html/">
        <i class='fas fa-minus'></i>&nbsp;hugo with html
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/spinnaker/" title="Spinnaker" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/">
          <i class='fas fa-angle-right'></i>&nbsp;Spinnaker
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/installation/" title="Installation" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/installation/">
          <i class='fas fa-angle-right'></i>&nbsp;Installation
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/overview/" title="Overview" class="dd-item ">
        <a href="/spinnaker/installation/overview/">
        <i class='fas fa-minus'></i>&nbsp;Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/install-halyard/" title="Install Halyard" class="dd-item ">
        <a href="/spinnaker/installation/install-halyard/">
        <i class='fas fa-minus'></i>&nbsp;Install Halyard
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-cloud-providers/" title="Choose Cloud Providers" class="dd-item ">
        <a href="/spinnaker/installation/choose-cloud-providers/">
        <i class='fas fa-minus'></i>&nbsp;Choose Cloud Providers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-your-environment/" title="Choose Your Environment" class="dd-item ">
        <a href="/spinnaker/installation/choose-your-environment/">
        <i class='fas fa-minus'></i>&nbsp;Choose Your Environment
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/choose-a-storage-service/" title="Choose a Storage Service" class="dd-item ">
        <a href="/spinnaker/installation/choose-a-storage-service/">
        <i class='fas fa-minus'></i>&nbsp;Choose a Storage Service
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/deploy-and-connect/" title="Deploy and Connect" class="dd-item ">
        <a href="/spinnaker/installation/deploy-and-connect/">
        <i class='fas fa-minus'></i>&nbsp;Deploy and Connect
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/installation/install-in-air-gaped-environment/" title="Install in Air Gaped Environment" class="dd-item ">
        <a href="/spinnaker/installation/install-in-air-gaped-environment/">
        <i class='fas fa-minus'></i>&nbsp;Install in Air Gaped Environment
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/canaryanalysis/" title="CanaryAnalysis" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/canaryanalysis/">
          <i class='fas fa-angle-right'></i>&nbsp;CanaryAnalysis
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/canaryanalysis/canary-analysis/" title="Canary Analysis" class="dd-item ">
        <a href="/spinnaker/canaryanalysis/canary-analysis/">
        <i class='fas fa-minus'></i>&nbsp;Canary Analysis
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/spinnaker/tips/" title="Tips" class="dd-item 
        
        
        
        ">
      <a href="/spinnaker/tips/">
          <i class='fas fa-angle-right'></i>&nbsp;Tips
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spinnaker/tips/pipeline-expressions/" title="Pipeline Expressions" class="dd-item ">
        <a href="/spinnaker/tips/pipeline-expressions/">
        <i class='fas fa-minus'></i>&nbsp;Pipeline Expressions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ansible/" title="Ansible" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/">
          <i class='fas fa-angle-right'></i>&nbsp;Ansible
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/" title="Ansible for DevOps" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/ansible-for-devops/">
          <i class='fas fa-angle-right'></i>&nbsp;Ansible for DevOps
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/getting-started-with-ansible/" title="Chapter 1 - Getting Started With Ansible" class="dd-item ">
        <a href="/ansible/ansible-for-devops/getting-started-with-ansible/">
        <i class='fas fa-minus'></i>&nbsp;Getting Started With Ansible
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/local-infrastructure-development-ansible-and-vagrant/" title="Chapter 2 - Local Infrastructure Development: Ansible and Vagrant" class="dd-item ">
        <a href="/ansible/ansible-for-devops/local-infrastructure-development-ansible-and-vagrant/">
        <i class='fas fa-minus'></i>&nbsp;Local Infrastructure Development: Ansible and Vagrant
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/ad-hoc-commands/" title="Ad Hoc Commands" class="dd-item ">
        <a href="/ansible/ansible-for-devops/ad-hoc-commands/">
        <i class='fas fa-minus'></i>&nbsp;Ad Hoc Commands
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/ansible-playbooks/" title="Ansible Playbooks" class="dd-item ">
        <a href="/ansible/ansible-for-devops/ansible-playbooks/">
        <i class='fas fa-minus'></i>&nbsp;Ansible Playbooks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/chapter5/" title="Chapter5" class="dd-item 
        
        
        
        ">
      <a href="/ansible/ansible-for-devops/chapter5/">
          <i class='fas fa-angle-right'></i>&nbsp;Chapter5
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/ansible-playbooks-beyond-the-basics/" title="Ansible Playbooks Beyond the Basics" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/ansible-playbooks-beyond-the-basics/">
        <i class='fas fa-minus'></i>&nbsp;Ansible Playbooks Beyond the Basics
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/handover/" title="Handover" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/handover/">
        <i class='fas fa-minus'></i>&nbsp;Handover
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/environment-variables/" title="Environment Variables" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/environment-variables/">
        <i class='fas fa-minus'></i>&nbsp;Environment Variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/variables/" title="Variables" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/variables/">
        <i class='fas fa-minus'></i>&nbsp;Variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/conditionals/" title="if/then/when - Conditionals" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/conditionals/">
        <i class='fas fa-minus'></i>&nbsp;if/then/when - Conditionals
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/delegation-local-actions-and-pauses/" title="Delegation Local Actions and Pauses" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/delegation-local-actions-and-pauses/">
        <i class='fas fa-minus'></i>&nbsp;Delegation Local Actions and Pauses
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/prompts/" title="Prompts" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/prompts/">
        <i class='fas fa-minus'></i>&nbsp;Prompts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/tags/" title="Tags" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/tags/">
        <i class='fas fa-minus'></i>&nbsp;Tags
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter5/summary/" title="Summary" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter5/summary/">
        <i class='fas fa-minus'></i>&nbsp;Summary
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ansible/ansible-for-devops/chapter6/" title="Chapter6" class="dd-item 
        parent
        
        
        ">
      <a href="/ansible/ansible-for-devops/chapter6/">
          <i class='fas fa-angle-right'></i>&nbsp;Chapter6
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter6/playbook-organization-roles-and-includes/" title="Playbook Organization Roles and Includes" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter6/playbook-organization-roles-and-includes/">
        <i class='fas fa-minus'></i>&nbsp;Playbook Organization Roles and Includes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter6/includes/" title="Includes" class="dd-item active">
        <a href="/ansible/ansible-for-devops/chapter6/includes/">
        <i class='fas fa-minus'></i>&nbsp;Includes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/ansible-for-devops/chapter6/roles/" title="Roles" class="dd-item ">
        <a href="/ansible/ansible-for-devops/chapter6/roles/">
        <i class='fas fa-minus'></i>&nbsp;Roles
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ansible/create-vm-with-ansible-libvirt/" title="Create Vm With Ansible Libvirt" class="dd-item ">
        <a href="/ansible/create-vm-with-ansible-libvirt/">
        <i class='fas fa-minus'></i>&nbsp;Create Vm With Ansible Libvirt
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ubuntu/" title="Ubuntu" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/">
          <i class='fas fa-angle-right'></i>&nbsp;Ubuntu
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ubuntu/tools/" title="Tools" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/tools/">
          <i class='fas fa-angle-right'></i>&nbsp;Tools
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/tools/tmux/" title="Tmux" class="dd-item ">
        <a href="/ubuntu/tools/tmux/">
        <i class='fas fa-minus'></i>&nbsp;Tmux
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ubuntu/network/" title="Network" class="dd-item 
        
        
        
        ">
      <a href="/ubuntu/network/">
          <i class='fas fa-angle-right'></i>&nbsp;Network
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/network/netplan/" title="Netplan으로 static IP 할당받기" class="dd-item ">
        <a href="/ubuntu/network/netplan/">
        <i class='fas fa-minus'></i>&nbsp;Netplan으로 static IP 할당받기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/customize-login-message/" title="Ubuntu의 Login Message 수정하기" class="dd-item ">
        <a href="/ubuntu/customize-login-message/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu의 Login Message 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/start-tmux-after-reboot/" title="reboot 후에 tmux를 실행시켜 원하는 작업을 하기" class="dd-item ">
        <a href="/ubuntu/start-tmux-after-reboot/">
        <i class='fas fa-minus'></i>&nbsp;reboot 후에 tmux를 실행시켜 원하는 작업을 하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/oh-my-zsh-home-end-key/" title="oh-my-zsh에서 home key와 end key가 안될 때 해결방법" class="dd-item ">
        <a href="/ubuntu/oh-my-zsh-home-end-key/">
        <i class='fas fa-minus'></i>&nbsp;oh-my-zsh에서 home key와 end key가 안될 때 해결방법
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/base64-encode-decode/" title="Ubuntu에서 Base64로 인코딩, 디코딩하기" class="dd-item ">
        <a href="/ubuntu/base64-encode-decode/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu에서 Base64로 인코딩, 디코딩하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/file-edit-without-editor/" title="Editor(vi)가 없을 때 파일 수정하기" class="dd-item ">
        <a href="/ubuntu/file-edit-without-editor/">
        <i class='fas fa-minus'></i>&nbsp;Editor(vi)가 없을 때 파일 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/check-listen-port/" title="열려있는 포트 확인하기" class="dd-item ">
        <a href="/ubuntu/check-listen-port/">
        <i class='fas fa-minus'></i>&nbsp;열려있는 포트 확인하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/using-watch-with-pipes/" title="pipe를 사용한 명령어를 watch로 확인하기" class="dd-item ">
        <a href="/ubuntu/using-watch-with-pipes/">
        <i class='fas fa-minus'></i>&nbsp;pipe를 사용한 명령어를 watch로 확인하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/use-alias-in-watch/" title="watch를 사용할 때 alias 이용하기" class="dd-item ">
        <a href="/ubuntu/use-alias-in-watch/">
        <i class='fas fa-minus'></i>&nbsp;watch를 사용할 때 alias 이용하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-without-password/" title="password 없이 ssh 접속하기" class="dd-item ">
        <a href="/ubuntu/ssh-without-password/">
        <i class='fas fa-minus'></i>&nbsp;password 없이 ssh 접속하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-tunneling/" title="SSH Tunneling 사용법" class="dd-item ">
        <a href="/ubuntu/ssh-tunneling/">
        <i class='fas fa-minus'></i>&nbsp;SSH Tunneling 사용법
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/ssh-with-jump/" title="Gateway를 이용하여 SSH 접속하기" class="dd-item ">
        <a href="/ubuntu/ssh-with-jump/">
        <i class='fas fa-minus'></i>&nbsp;Gateway를 이용하여 SSH 접속하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/change-hostname/" title="Hostname 변경하기" class="dd-item ">
        <a href="/ubuntu/change-hostname/">
        <i class='fas fa-minus'></i>&nbsp;Hostname 변경하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/unattended-ubuntu/" title="추가 입력절차(prompt) 없이 Ubuntu 설치하는 이미지 만들기" class="dd-item ">
        <a href="/ubuntu/unattended-ubuntu/">
        <i class='fas fa-minus'></i>&nbsp;추가 입력절차(prompt) 없이 Ubuntu 설치하는 이미지 만들기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/how-to-edit-boot-parameter-during-install/" title="Ubuntu 설치 시 Boot Parameter를 수정하기" class="dd-item ">
        <a href="/ubuntu/how-to-edit-boot-parameter-during-install/">
        <i class='fas fa-minus'></i>&nbsp;Ubuntu 설치 시 Boot Parameter를 수정하기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ubuntu/how-to-use-sudo-without-password/" title="sudo를 password 없이 사용하기" class="dd-item ">
        <a href="/ubuntu/how-to-use-sudo-without-password/">
        <i class='fas fa-minus'></i>&nbsp;sudo를 password 없이 사용하기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/KimMJ"><i class='fab fa-github'></i> Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://learn.netlify.com/en/"><i class='fas fa-bookmark'></i> Hugo Theme Learn</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://kimmj.github.io/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




<div id="docsToc">
  <div class="pi-accordion">
    
    
    
    
    
      
      
    
    
  </div> 
 <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 
© 2020 GitHub, Inc.
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Ibiza</a> > <a href='/ansible/'>Ansible</a> > <a href='/ansible/ansible-for-devops/'>Ansible for DevOps</a> > <a href='/ansible/ansible-for-devops/chapter6/'>Chapter6</a> > Includes
          
         
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#handler-includes">Handler includes</a></li>
    <li><a href="#playbook-includes">Playbook includes</a></li>
    <li><a href="#complete-includes-example">Complete includes example</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/ansible">ansible</a>

  <a class="tag-link" href="/tags/ansible-for-devops">ansible-for-devops</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Includes
            </h1>
          

        



<nav id="TableOfContents">
  <ul>
    <li><a href="#handler-includes">Handler includes</a></li>
    <li><a href="#playbook-includes">Playbook includes</a></li>
    <li><a href="#complete-includes-example">Complete includes example</a></li>
  </ul>
</nav>

<p>우리는 챕터 4에서 <code>vars_files</code>를 사용하여 variable을 playbook에 적는 것이 아닌 분리된 <code>vars.yml</code>에 저장할 때 다른 파일들을 include하는 기본적인 방법을 이미 봤었다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- hosts: all
  
  vars_files:
  - vars.yml
</code></pre></div><p>task도 이와 비슷한 방법으로 include할 수 있다.
playbook에서의 <code>tasks: </code> 섹션에서 <code>include</code> 지시자를 다음과 같이 작성한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">tasks:
  - include: included-playbook.yml
</code></pre></div><p>variable include file과 같이 task도 included file에서 flat list 형태로 있게 된다.
예를 들어 <code>included-playbook.yml</code>은 다음과 같을 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- name: Add profile info for user.
  copy:
    src: example_profile
    dest: <span style="color:#e6db74">&#34;/home/{{ username }}/.profile&#34;</span>
    owner: <span style="color:#e6db74">&#34;{{ username }}&#34;</span>
    group: <span style="color:#e6db74">&#34;{{ username }}&#34;</span>
    mode: <span style="color:#ae81ff">0744</span>

- name: Add private keys for user.
  copy:
    src: <span style="color:#e6db74">&#34;{{ item.src }}&#34;</span>
    dest: <span style="color:#e6db74">&#34;/home/.ssh/{{ item.dest }}&#34;</span>
    owner: <span style="color:#e6db74">&#34;{{ username }}&#34;</span>
    group: <span style="color:#e6db74">&#34;{{ username }}&#34;</span>
    mode: <span style="color:#ae81ff">0600</span>
  with_items: ssh_private_keys

- name: Restart example service.
  service: name=example state=restarted
</code></pre></div><p>이 경우에 user account를 configure하고 몇몇 서비스를 재시작하기 때문에 파일을 <code>user-config.yml</code>이라고 이름지을 수 있다.
이제 여기 그리고 서버를 provision하거나 configure하는 다른 모든 playbook에서 특정 user account를 configure하고 싶다면 다음을 playbook의 <code>tasks</code> section에 추가하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- include: example-app-config.yml
</code></pre></div><p>우리는 이 파일에 정의된 <code>{{ username }}</code>과 <code>{{ ssh_private_keys}}</code> variable을 하드코딩된 value 대신에 사용하여 include file을 재사용 가능하도록 만들 것이다.
variable을 playbook 내에서 정의할수도 있고 include variable file을 통해서도 정의할 수 있지만 Ansible은 일반적은 YAML 문법으로 직접 include할 수 있도록 할 수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- { include: user-config.yml, username: johndoe, ssh_private_keys: [] }
- { include: user-config.yml, username: janedoe, ssh_private_keys: [] }
</code></pre></div><p>더 읽기 쉽게 하기 위해 구조화된 variable을 사용할수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- include: user-config.yml
  vars:
    username: johndoe
    ssh_private_keys:
      - { src: /path/to/johndoe/key1, dest: id_rsa }
      - { src: /path/to/johndoe/key2, dest: id_rsa2 }
- include: user-config.yml
  vars:
    username: janedoe
    ssh_private_keys:
      - { src: /path/to/janedoe/key1, dest: id_rsa }
      - { src: /path/to/janedoe/key2, dest: id_rsa2 }
</code></pre></div><p>Include file은 다른 file들도 include할 수 있어 다음과 같은것을 할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">tasks:
  - include: user-config.yml
</code></pre></div><p><code>user-config.yml</code>안에서는 다음과 같이 작성한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- include: ssh-setup.yml
</code></pre></div><h2 id="handler-includes">Handler includes</h2>
<p>handler도 task처럼 playbook의 <code>handlers</code> 섹션 안에서 include 될 수 있다.
예를 들면 다음과 같다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">handlers:
  - include: included-handlers.yml
</code></pre></div><p>handler는 서비스를 재시작하거나 configuration을 로딩하는 것과 같은데 사용되기 때문에 이는 main playbook의 노이즈를 줄여주는데 도움을 줄 것이고 playbook의 원래 목적에 맞게 파일을 분리해줄 것이다.</p>
<h2 id="playbook-includes">Playbook includes</h2>
<p>playbook은 최 상단에 <code>include</code> 문법을 사용하여 다른 playbook을 include 할 수 있다.
예를 들어 두개의 playbook을 가지고 있고 하나는 webserver에 대한 것(<code>web.yml</code>), 하나는 database server에 대한 것(<code>db.yml</code>)이라고 한다면 다음 playbook으로 동시에 실행할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- hosts: all
  remote_user: root

  tasks:
    ...

- include: web.yml
- include: db.yml
</code></pre></div><p>이런 방법으로 playbook을 생성하여 infrastructure의 모든 서버를 configure할 수 있고 그러면 master playbook을 생성하여 각각의 개별 playbook을 include
infrastructure를 initialize하고 싶을 때, 전체 서버들에 대해 변경사항이 있을 때, configuration들이 playbook의 정의와 일치하는지 알고 싶을 때 <code>ansible-playbook</code> command를 실행하기만 하면 된다.</p>
<h2 id="complete-includes-example">Complete includes example</h2>
<p>우리가 챕터 4에서 만들었던 137줄의 Drupal LAMP server playbook을 21줄로만 재구성할 수 있다고 한다면 어떨까?
include가 있다면 이는 쉽다.
단순히 간 task를 그 자체 파일로 만든 다음 main playbook을 다음과 같이 구성하기만 하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- hosts: all
  
  vars_files:
    - vars.yml
  
  pre_tasks:
    - name: Update apt cache if needed.
      apt: update_cache=yes cache_valid_time=<span style="color:#ae81ff">3600</span>

  handlers:
    - include: handlers/handlers.yml

  tasks:
    - include: tasks/common.yml
    - include: tasks/apache.yml
    - include: tasks/php.yml
    - include: tasks/mysql.yml
    - include: tasks/composer.yml
    - include: tasks/drush.yml
    - include: tasks/drupal.yml
</code></pre></div><p>해야할 일은 Drupal의 <code>playbook.yml</code> 파일과 같은 위치에서 <code>handlers</code>, <code>tasks</code> 폴더를 생성하고 각 섹션의 playbook을 그 안에서 생성하는 것이다.</p>
<p>예를 들어 <code>handlers/handlers.yml</code>의 내용은 다음과 같을 것이다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- name: restart apache
  service: name=apache2 state=restarted
</code></pre></div><p><code>tasks/drush.yml</code>는 다음과 같을 것이다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
- name: Check out drush master branch.
  git:
    repo: https://github.com/drush-ops/drush.git
    dest: /opt/drush

- name: Install Drush dependencies with Composer.&#34;
  shell: <span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">   </span><span style="color:#e6db74"> </span><span style="color:#e6db74">/usr/local/bin/composer install</span>
    chdir=/opt/drush
    creates=/opt/drush/vendor/autoload.php
  
- name: Create drush bin symlink.
  file:
    src: /opt/drush/drush
    dest: /usr/local/bin/drush
    state: link
</code></pre></div><p>모든 task를 각각의 파일로 나누는 것은 playbook을 관리할 때 필요한 파일이 더 많아지는 것을 의미하지만 더 간결하게 main playbook을 유지할 수 있도록 해준다.
이는 playbook이 가지고 있는 installation과 configuration 단계를 보기에 더 쉽고 task를 유지보수할 수 있도록 묶을 수 있다.
각 23개의 분리된 task를 하나의 playbook에서 실행하는 것 대신 각 2개에서 5개의 task를 가진 8개의 분리된 파일을 유지보수하기만 하면 된다.</p>
<p>하나의 긴 playbook을 관리하는 것보다 관련된 task가 묶인 작은 단위를 관리하는 것이 더 쉽다.
하지만 처음부터 여러개의 개별 include로 playbook을 작성할 필요는 전혀 없다.
대부분은 자세한 setup과 configuration을 작업할 때 하나의 monolithic playbook을 가지고 있는게 가장 좋고 논리적인 그룹으로 각 include file을 나누는 것이 좋다.</p>
<p>또한 tag(이전 챕터에서 설명했다)를 사용하여 playbook이 특정 include file만 포함하여 실행되도록 할 수 있다.
위의 예시에서 보면 <code>drush</code> tag를 include된 drush file에 추가하고자 한다면(그렇게 해서 <code>ansible-playbook playbook.yml --tags=drush</code>로 실행하고자 한다면) 20번째 줄을 다음과 같이 수정하면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- include: tasks/drush.yml tags=drush
</code></pre></div>
<div class="notices notes" ><p>include file을 사용하는 전체 Drupal LAMP server playbook의 예시는 이 도서의 code repository인 <a href="https://github.com/geerlingguy/ansible-for-devops">https://github.com/geerlingguy/ansible-for-devops</a>의 <code>includes</code> 디렉토리에서 볼 수 있다.</p>
</div>


<div class="notices warning" ><p>variable을 task include file name으로 사용할 수 없다(<code>include_vars</code> 지시자에서 했던 것처럼, <code>include_vars: &quot;{{ ansible_os_family }}.yml</code>을 task에 사용하는것, 또는 <code>vars_files</code>에서 사용하는것).
나중에 설명하게 될 다른 playbook structure나 role들을 사용하여 conditional task inclusion을 수행할 수 있는, conditional task include보다 더 좋은 방법이 있을 것이다.</p>
</div>



<footer class=" footline" >
	
</footer>


        
            <div id="utterance">    
    <script src="https://utteranc.es/client.js"
            repo="kimmj/kimmj.github.io"
            issue-term="pathname"
            label="comments"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
</div>
        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1601133350"></script>
    <script src="/js/perfect-scrollbar.min.js?1601133350"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1601133350"></script>
    <script src="/js/jquery.sticky.js?1601133350"></script>
    <script src="/js/featherlight.min.js?1601133350"></script>
    <script src="/js/highlight.pack.js?1601133350"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1601133350"></script>
    <script src="/js/learn.js?1601133350"></script>
    <script src="/js/hugo-learn.js?1601133350"></script>

    <link href="/mermaid/mermaid.css?1601133350" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1601133350"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
    

  </body>
</html>

